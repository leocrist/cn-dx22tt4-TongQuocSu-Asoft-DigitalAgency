"use client"

import Link from "next/link"
import { usePathname, useRouter } from "next/navigation"
import { FileText, BookOpen, LogOut } from "lucide-react"
import { useSnackbar } from "./snackbar-provider"
import { useAuth } from "@/contexts/auth-context"

export function AdminSidebar() {
  const pathname = usePathname()
  const router = useRouter()
  const { showSnackbar } = useSnackbar()
  const { logout } = useAuth()

  const isActive = (path: string) => {
    return pathname === path || pathname.startsWith(`${path}/`)
  }

  const handleLogout = async () => {
    try {
      await logout()
      showSnackbar("Logout successful", "success")
    } catch (error) {
      console.error("Error during logout:", error)
      showSnackbar("An error occurred during logout", "error")
    }
  }

  return (
    <div className="w-64 bg-white shadow-md min-h-screen flex flex-col">
      <div className="p-6 border-b">
        <Link href="/admin" className="flex items-center">
        <svg width="109" height="28" viewBox="0 0 109 28" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M14.2692 0.456909C14.2692 0.456909 11.0055 17.6839 0.828125 26.6088C0.828125 26.6088 12.5795 23.2279 25.309 25.9005C25.309 25.9005 21.4532 23.1064 18.564 22.8061C15.6747 22.5057 15.0542 21.992 13.6143 21.9078C12.1743 21.8235 15.0518 15.1939 15.0345 13.0706C15.0172 10.9472 14.2692 0.456909 14.2692 0.456909Z" fill="#DBDBDB"/>
<path d="M13.6152 21.9072C12.1753 21.8231 15.0528 15.1933 15.0355 13.07C15.0182 10.9468 14.2701 0.456299 14.2701 0.456299C14.2701 0.456299 11.0065 17.6833 0.829102 26.6082C0.829102 26.6082 7.07742 24.6399 13.6852 21.9119C13.6619 21.9104 13.6389 21.9087 13.6152 21.9072Z" fill="#F0F0F0"/>
<path d="M25.3089 25.8999C23.5642 25.4035 21.8707 25.0244 20.2518 24.7379C19.8736 22.9407 19.4493 21.2733 18.996 19.7285C18.4259 17.7878 17.8113 16.0414 17.1831 14.4792C16.0395 11.6363 14.8516 9.40085 13.8096 7.71701C13.9929 6.5542 14.1109 5.50275 14.1844 4.57399C14.3124 2.95083 14.3172 1.56917 14.2693 0.456604C14.9605 1.18053 16.7331 3.19934 18.7323 6.75352C18.7318 6.75456 18.7318 6.75456 18.7329 6.75501C20.577 10.0334 22.6156 14.621 24.1763 20.7044C24.5921 22.3274 24.9746 24.0584 25.3089 25.8999Z" fill="#9F19FF"/>
<path d="M13.6732 23.9966C11.6115 23.8924 9.82699 23.927 8.41895 24.0044C9.25095 22.3311 9.96593 20.7199 10.5822 19.1786C12.3734 14.6986 13.3214 10.8132 13.8093 7.71745C13.9931 6.55449 14.1108 5.50334 14.1842 4.57339C14.3119 2.95097 14.3163 1.56932 14.2688 0.456299C14.9606 1.18022 16.7335 3.19919 18.7323 6.75321C18.7316 6.75411 18.7316 6.75411 18.7325 6.75485C18.4595 9.02293 17.9805 11.6106 17.1825 14.4786C16.7523 16.0247 16.2293 17.6519 15.5971 19.3542C15.0441 20.8453 14.4067 22.3949 13.6732 23.9966Z" fill="#5E1CCE"/>
<path d="M20.252 24.7378C17.8639 24.3144 15.6421 24.0932 13.6738 23.9966C11.611 23.8929 9.82729 23.9264 8.41895 24.0042C9.2514 22.3308 9.96668 20.7203 10.5827 19.1792C12.0606 19.1623 13.7479 19.2067 15.5975 19.3542C16.6774 19.4403 17.8131 19.5624 18.996 19.7285C19.4494 21.2734 19.8737 22.9408 20.252 24.7378Z" fill="#9019FF"/>
<path opacity="0.33" d="M17.5996 19.5515C18.1822 20.5091 19.5709 22.8799 20.2179 24.7322C20.2292 24.7342 20.2401 24.7359 20.2514 24.7379C19.8732 22.9407 19.4489 21.2733 18.9956 19.7286C18.5217 19.6621 18.0577 19.6044 17.5996 19.5515Z" fill="black"/>
<path d="M66.8994 5.43365H75.67V7.67375H73.0312V14.103H69.5572V7.67375H66.8994V5.43365Z" fill="black"/>
<path d="M59.1289 5.43365H66.3744V7.78133H62.603V8.69888H65.6594V10.939H62.603V14.103H59.1289V5.43365Z" fill="black"/>
<path d="M51.2258 9.34429C51.2089 9.49194 51.2005 9.63538 51.2005 9.77459C51.2005 10.458 51.3987 10.9938 51.7953 11.3819C52.1496 11.7278 52.5905 11.9008 53.1178 11.9008C53.6452 11.9008 54.0987 11.7278 54.4783 11.3819C54.896 10.9938 55.1048 10.4833 55.1048 9.85053C55.1639 9.21351 54.9761 8.67775 54.5416 8.24323C54.1366 7.84667 53.6536 7.6484 53.0925 7.6484C52.6622 7.6484 52.2825 7.78339 51.9535 8.05339C51.5907 8.35291 51.3481 8.78321 51.2258 9.34429ZM53.1685 5.26276C54.915 5.26276 56.2945 5.71626 57.3069 6.62327C58.2055 7.4459 58.6548 8.45838 58.6548 9.66069C58.6548 10.901 58.1739 11.9577 57.212 12.831C56.1489 13.8013 54.7336 14.2738 52.966 14.2485C51.3122 14.2189 49.9939 13.7338 49.011 12.793C48.1208 11.9366 47.6758 10.9052 47.6758 9.69866C47.6758 8.48791 48.1251 7.47121 49.0236 6.64858C50.0361 5.7247 51.4177 5.26276 53.1685 5.26276Z" fill="black"/>
<path d="M40.4736 11.3439C40.6297 11.4705 40.963 11.5907 41.4735 11.7046C41.9839 11.8185 42.4543 11.8755 42.8846 11.8755C43.4625 11.8755 43.7515 11.7679 43.7515 11.5528C43.7515 11.3798 43.5448 11.1414 43.1314 10.8377C41.4735 9.63538 40.6445 8.54697 40.6445 7.57247C40.6445 6.96498 40.9588 6.42289 41.5874 5.94618C42.2202 5.46526 43.028 5.22479 44.011 5.22479C44.3991 5.22479 44.8652 5.26487 45.4094 5.34502C45.844 5.40408 46.2764 5.46736 46.7067 5.53486L47.0041 8.17995C46.4852 7.8509 45.8165 7.68637 44.9981 7.68637C44.3738 7.68637 44.0616 7.81293 44.0616 8.06605C44.0616 8.23901 44.2261 8.44994 44.5552 8.69884C45.6858 9.55523 46.2658 9.99608 46.2954 10.0214C46.8016 10.4854 47.0737 10.96 47.1117 11.4452C47.2298 13.314 46.0929 14.2485 43.7009 14.2485C42.8529 14.2485 41.9164 14.1303 40.8913 13.8941L40.4736 11.3439Z" fill="black"/>
<path d="M32.5389 5.43365H36.5318L40.0945 14.103H36.7217L36.0129 12.1603H32.849L32.1339 14.103H28.5586L32.5389 5.43365ZM33.564 10.0214H35.3991L34.4816 7.78133L33.564 10.0214Z" fill="black"/>
<path d="M104.127 17.8355L107.068 17.1793V18.691H108.293V20.8589H107.068V22.1832C107.068 22.5972 107.283 22.8043 107.713 22.8043C107.979 22.8043 108.236 22.7242 108.486 22.564L108.293 24.6441C107.676 24.8199 107.055 24.9078 106.43 24.9078C104.895 24.9078 104.127 24.3472 104.127 23.2261V20.8589H103.096V18.691H104.127V17.8355Z" fill="black"/>
<path d="M95.2324 18.691H98.0625V19.2535C98.2812 19.0152 98.5938 18.8257 99 18.6851C99.4102 18.5445 99.8379 18.4742 100.283 18.4742C100.955 18.4742 101.508 18.6343 101.941 18.9547C102.445 19.3297 102.697 19.8726 102.697 20.5836V24.7379H99.7676V21.7144C99.7676 21.441 99.6973 21.2261 99.5566 21.0699C99.416 20.9136 99.2461 20.8355 99.0469 20.8355C98.8086 20.8355 98.6094 20.941 98.4492 21.1519C98.2578 21.3824 98.1621 21.6968 98.1621 22.0953V24.7379H95.2324V18.691Z" fill="black"/>
<path d="M90.6855 21.1519H92.1035C92.127 20.8785 92.0703 20.6675 91.9336 20.5191C91.7969 20.3707 91.6289 20.2964 91.4297 20.2964C91.2305 20.2964 91.0625 20.3687 90.9258 20.5132C90.7656 20.6656 90.6855 20.8785 90.6855 21.1519ZM94.2773 22.564L94.084 24.6441C93.2207 24.8043 92.4355 24.8843 91.7285 24.8843C89.1699 24.8843 87.8906 23.8843 87.8906 21.8843C87.8906 21.5132 87.9395 21.1089 88.0371 20.6714C88.1699 20.0386 88.5684 19.5347 89.2324 19.1597C89.8496 18.8082 90.5625 18.6324 91.3711 18.6324C92.3086 18.6324 93.0918 18.8629 93.7207 19.3238C94.4434 19.855 94.8047 20.5875 94.8047 21.5211C94.8047 21.7281 94.7832 21.9488 94.7402 22.1832H90.6855C90.7988 22.7418 91.2383 23.0211 92.0039 23.0211C92.5078 23.0211 93.2656 22.8687 94.2773 22.564Z" fill="black"/>
<path d="M76.998 18.691H79.6523V19.4468C80.1211 18.8453 80.7441 18.5445 81.5215 18.5445C82.3145 18.5445 82.9512 18.8121 83.4316 19.3472C83.8691 18.7964 84.5039 18.5211 85.3359 18.5211C85.9219 18.5211 86.418 18.6656 86.8242 18.9547C87.2656 19.275 87.4863 19.691 87.4863 20.2027V24.7379H84.6562V21.5211C84.7031 21.0718 84.5625 20.8472 84.2344 20.8472C84.0977 20.8472 83.9746 20.9078 83.8652 21.0289C83.7598 21.15 83.707 21.314 83.707 21.5211V24.7379H80.877V21.5211C80.877 21.107 80.7246 20.9 80.4199 20.9C80.2832 20.9 80.166 20.9625 80.0684 21.0875C79.9746 21.2086 79.9277 21.3863 79.9277 21.6207V24.7379H76.998V18.691Z" fill="black"/>
<path d="M72.4512 21.1519H73.8691C73.8926 20.8785 73.8359 20.6675 73.6992 20.5191C73.5625 20.3707 73.3945 20.2964 73.1953 20.2964C72.9961 20.2964 72.8281 20.3687 72.6914 20.5132C72.5312 20.6656 72.4512 20.8785 72.4512 21.1519ZM76.043 22.564L75.8496 24.6441C74.9863 24.8043 74.2012 24.8843 73.4941 24.8843C70.9355 24.8843 69.6562 23.8843 69.6562 21.8843C69.6562 21.5132 69.7051 21.1089 69.8027 20.6714C69.9355 20.0386 70.334 19.5347 70.998 19.1597C71.6152 18.8082 72.3281 18.6324 73.1367 18.6324C74.0742 18.6324 74.8574 18.8629 75.4863 19.3238C76.209 19.855 76.5703 20.5875 76.5703 21.5211C76.5703 21.7281 76.5488 21.9488 76.5059 22.1832H72.4512C72.5645 22.7418 73.0039 23.0211 73.7695 23.0211C74.2734 23.0211 75.0312 22.8687 76.043 22.564Z" fill="black"/>
<path d="M69.2227 18.9781V25.8687C69.2227 27.0992 68.2656 27.7144 66.3516 27.7144C65.4414 27.7144 64.3184 27.5738 62.9824 27.2925L62.6953 25.107C63.8633 25.4468 64.7148 25.6168 65.25 25.6168C65.9922 25.6168 66.3633 25.3277 66.3633 24.7496C66.3633 24.605 66.3398 24.4449 66.293 24.2691C65.7266 24.6793 65.1348 24.8843 64.5176 24.8843C63.7637 24.8843 63.1191 24.605 62.584 24.0464C62.0488 23.4839 61.7812 22.7789 61.7812 21.9312C61.7812 21.5797 61.834 21.2222 61.9395 20.8589C62.5293 19.3004 63.916 18.5211 66.0996 18.5211C67.0762 18.5211 68.1172 18.6734 69.2227 18.9781ZM66.293 21.7144V20.7652C66.207 20.7574 66.123 20.7535 66.041 20.7535C65.2402 20.7535 64.7891 21.105 64.6875 21.8082C64.6875 22.1129 64.7637 22.3531 64.916 22.5289C65.0723 22.7047 65.2559 22.7925 65.4668 22.7925C65.6895 22.7925 65.8828 22.6968 66.0469 22.5054C66.2109 22.314 66.293 22.0504 66.293 21.7144Z" fill="black"/>
<path d="M55.5996 18.9781C56.7363 18.7476 57.7363 18.6324 58.5996 18.6324C60.4004 18.6324 61.3555 19.1226 61.4648 20.1031V24.7379H58.623V22.3765C58.3418 22.5015 58.0898 22.5972 57.8672 22.6636C57.6406 22.7496 57.5273 22.8648 57.5273 23.0093C57.5273 23.0992 57.5723 23.1773 57.6621 23.2437C57.752 23.3101 57.8555 23.3433 57.9727 23.3433C58.1016 23.3433 58.2266 23.3043 58.3477 23.2261L57.9609 24.8316C57.6406 24.8902 57.3379 24.9195 57.0527 24.9195C56.3145 24.9195 55.7305 24.7437 55.3008 24.3922C54.9141 24.0718 54.7012 23.6519 54.6621 23.1324C54.7012 22.3004 55.0645 21.732 55.752 21.4273C56.0566 21.2906 56.8262 21.1343 58.0605 20.9586C58.4121 20.9117 58.5879 20.7828 58.5879 20.5718C58.5879 20.3726 58.3633 20.273 57.9141 20.273C57.3203 20.273 56.4883 20.4683 55.418 20.8589L55.5996 18.9781Z" fill="black"/>
<path d="M46.7988 18.691H49.6289V19.2535C49.8477 19.0152 50.1602 18.8257 50.5664 18.6851C50.9766 18.5445 51.4043 18.4742 51.8496 18.4742C52.5215 18.4742 53.0742 18.6343 53.5078 18.9547C54.0117 19.3297 54.2637 19.8726 54.2637 20.5836V24.7379H51.334V21.7144C51.334 21.441 51.2637 21.2261 51.123 21.0699C50.9824 20.9136 50.8125 20.8355 50.6133 20.8355C50.375 20.8355 50.1758 20.941 50.0156 21.1519C49.8242 21.3824 49.7285 21.6968 49.7285 22.0953V24.7379H46.7988V18.691Z" fill="black"/>
<path d="M40.459 18.9781C41.5957 18.7476 42.5957 18.6324 43.459 18.6324C45.2598 18.6324 46.2148 19.1226 46.3242 20.1031V24.7379H43.4824V22.3765C43.2012 22.5015 42.9492 22.5972 42.7266 22.6636C42.5 22.7496 42.3867 22.8648 42.3867 23.0093C42.3867 23.0992 42.4316 23.1773 42.5215 23.2437C42.6113 23.3101 42.7148 23.3433 42.832 23.3433C42.9609 23.3433 43.0859 23.3043 43.207 23.2261L42.8203 24.8316C42.5 24.8902 42.1973 24.9195 41.9121 24.9195C41.1738 24.9195 40.5898 24.7437 40.1602 24.3922C39.7734 24.0718 39.5605 23.6519 39.5215 23.1324C39.5605 22.3004 39.9238 21.732 40.6113 21.4273C40.916 21.2906 41.6855 21.1343 42.9199 20.9586C43.2715 20.9117 43.4473 20.7828 43.4473 20.5718C43.4473 20.3726 43.2227 20.273 42.7734 20.273C42.1797 20.273 41.3477 20.4683 40.2773 20.8589L40.459 18.9781Z" fill="black"/>
<path d="M28.916 16.7105H33.1641L33.9199 21.3394L34.9629 16.7105H39.0293V24.7379H36.3809V19.7339L35.25 24.7379H32.6016L31.4707 19.6402V24.7379H28.916V16.7105Z" fill="black"/>
        </svg>

        </Link>
      </div>

      <nav className="p-4 flex-1">
        <ul className="space-y-2">
          <li>
            <Link
              href="/admin/works"
              className={`flex items-center p-3 rounded-md transition-colors ${
                isActive("/admin/works") ? "bg-[#6E13E8] text-white" : "text-gray-700 hover:bg-gray-100"
              }`}
            >
              <FileText className="mr-3 h-5 w-5" />
              <span>Works</span>
            </Link>
          </li>
          <li>
            <Link
              href="/admin/insights"
              className={`flex items-center p-3 rounded-md transition-colors ${
                isActive("/admin/insights") ? "bg-[#6E13E8] text-white" : "text-gray-700 hover:bg-gray-100"
              }`}
            >
              <BookOpen className="mr-3 h-5 w-5" />
              <span>Insights</span>
            </Link>
          </li>
        </ul>
      </nav>

      <div className="p-4 border-t">
        <button
          onClick={handleLogout}
          className="flex items-center p-3 rounded-md w-full text-left text-gray-700 hover:bg-gray-100 transition-colors"
        >
          <LogOut className="mr-3 h-5 w-5" />
          <span>Logout</span>
        </button>
      </div>
    </div>
  )
}
